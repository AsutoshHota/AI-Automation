
{
  "nodes": [
    {
      "parameters": {},
      "name": "Start",
      "type": "n8n-nodes-base.start",
      "typeVersion": 2.2,
      "position": [
        0,
        0
      ]
    },
    {
      "parameters": {
        "formUi": {
          "name": "Contract Details",
          "fields": [
            {
              "label": "Client Name",
              "name": "clientName",
              "type": "string",
              "required": true
            },
            {
              "label": "Service Category",
              "name": "serviceCategory",
              "type": "options",
               "options": [
                  {
                    "name": "Option 1",
                    "value": "option1"
                  },
                  {
                    "name": "Option 2",
                    "value": "option2"
                   }
                ],
              "required": true
            },
            {
              "label": "Start Date",
              "name": "startDate",
              "type": "date",
              "required": true
            },
              {
              "label": "End Date",
              "name": "endDate",
              "type": "date",
              "required": true
            },
           {
              "label": "Detailed Service Requirements",
              "name": "serviceRequirements",
              "type": "string",
              "required": true,
                "multiline":true
            }
          ]
        }
      },
      "name": "Collect Contract Details",
      "type": "n8n-nodes-base.form",
      "typeVersion": 1,
      "position": [
        400,
        200
      ]
    },
    {
      "parameters": {
        "operation": "search",
         "options": {
            "limit": 10
          },
        "query": "={{$node[\"Collect Contract Details\"].json[\"serviceCategory\"]}}",
          "searchBy": "metadata"
      },
      "name": "Search Historical SoW",
      "type": "n8n-nodes-base.googleDrive",
       "typeVersion": 1,
      "position": [
        600,
        200
      ]
    },
    {
      "parameters": {
        "code": "// Code to analyze historical SoW documents for insights and reusable content\n// This is a placeholder, implement actual logic based on the Google Drive output\n\nconst historicalData = $input.all().map(item => item.json.data);\n\nlet combinedContent = '';\n\nhistoricalData.forEach(item => {\n  if (item && item.content) {\n    combinedContent += item.content + '\\n';\n  }\n});\n\n\n\n// This is a placeholder for the dynamic generation of clauses or sections based on service categories\n// Implement actual logic based on 'serviceCategory'\n\n\nlet serviceCategory = $node[\"Collect Contract Details\"].json[\"serviceCategory\"];\n\nlet clauses = ''\nif(serviceCategory === 'option1'){\n    clauses = 'These are the clauses for option 1'\n} else if (serviceCategory === 'option2'){\n    clauses = 'These are the clauses for option 2'\n}\n\n\n\n\nreturn [\n    {\n        json: {\n          historicalContent: combinedContent,\n            serviceClauses: clauses\n        }\n    }\n]\n",
        "jsMode": true
      },
      "name": "Analyze Historical Data and Generate Clauses",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        800,
        200
      ]
    },
      {
      "parameters": {
        "documentId": "your_template_id",
        "outputFormat": "docx",
        "mergeFields": {
          "fields": [
            {
              "key": "clientName",
              "value": "={{$node[\"Collect Contract Details\"].json[\"clientName\"]}}"
            },
            {
              "key": "serviceRequirements",
              "value": "={{$node[\"Collect Contract Details\"].json[\"serviceRequirements\"]}}"
            },
              {
              "key": "historicalContent",
              "value": "={{$node[\"Analyze Historical Data and Generate Clauses\"].json[\"historicalContent\"]}}"
            },
              {
              "key": "serviceClauses",
              "value": "={{$node[\"Analyze Historical Data and Generate Clauses\"].json[\"serviceClauses\"]}}"
            }
          ]
        }
      },
      "name": "Generate Document",
      "type": "n8n-nodes-base.googleDocs",
       "typeVersion": 1,
      "position": [
        1000,
        200
      ]
    },
    {
      "parameters": {
        "subject": "Scope of Work Document Generated",
        "text": "The Scope of Work document has been generated for {{$node[\"Collect Contract Details\"].json[\"clientName\"]}}.",
        "toEmail": "your_email@example.com"
      },
      "name": "Send Notification Email",
      "type": "n8n-nodes-base.emailSend",
       "typeVersion": 1,
      "position": [
        1200,
        200
      ]
    },
      {
      "parameters": {
           "operation": "upload",
           "fileData": "={{$node[\"Generate Document\"].json[\"file\"]}}",
          "fileName": "={{$node[\"Collect Contract Details\"].json[\"clientName\"]}}-SOW.docx",
          "folderId": "your_folder_id"
      },
      "name": "Archive Document",
      "type": "n8n-nodes-base.googleDrive",
       "typeVersion": 1,
      "position": [
        1000,
        400
      ]
    }
  ],
  "connections": {
    "Start": {
      "main": [
        [
          "Collect Contract Details",
          0
        ]
      ]
    },
    "Collect Contract Details": {
      "main": [
        [
          "Search Historical SoW",
          0
        ]
      ]
    },
    "Search Historical SoW": {
      "main": [
        [
          "Analyze Historical Data and Generate Clauses",
          0
        ]
      ]
    },
    "Analyze Historical Data and Generate Clauses": {
      "main": [
           [
          "Generate Document",
          0
        ]
      ]
    },
    "Generate Document": {
      "main": [
           [
          "Send Notification Email",
          0
        ],
          [
          "Archive Document",
          0
        ]
      ]
    }
  }
}


